!function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);const r=document.getElementById("seconds"),n=document.getElementById("minutes"),o=document.getElementById("hours");let a=null;function l(){let e=0;r.innerHTML=0;let t=0;n.innerHTML=0;let i=0;o.innerHTML=0,a=setInterval(()=>{isTimerPaused||(60===(e+=1)&&(t+=1,e=0,n.innerHTML=t),60===t&&(i+=1,t=0,o.innerHTML=i),r.innerHTML=e)},1e3)}function s(){a?(clearInterval(a),l()):l()}function d(){loop.stop(),isTimerPaused=!0}function u(e){e.target.value?"amount"===this.id?amountToSpawn=e.target.value:"size"===this.id?gSize=e.target.value:"speed"===this.id?gSpeed=e.target.value:"fertilityRate"===this.id?gFertilityRate=e.target.value:"fertilityProgress"===this.id?gFertilityProgress=e.target.value:"totalHunger"===this.id?gTotalHunger=e.target.value:"health"===this.id?gHealth=e.target.value:"damage"===this.id?gDamage=e.target.value:"defence"===this.id&&(gDefence=e.target.value):(alert("All fields must have a value"),"amount"===this.id?e.target.value=amountToSpawn:"size"===this.id?e.target.value=gSize:"speed"===this.id?e.target.value=gSpeed:"fertilityRate"===this.id?e.target.value=gFertilityRate:"fertilityProgress"===this.id?e.target.value=gFertilityProgress:"totalHunger"===this.id?e.target.value=gTotalHunger:"health"===this.id?e.target.value=gHealth:"damage"===this.id?e.target.value=gDamage:"defence"===this.id&&(e.target.value=gDefence))}function g(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function c(e){errorText.removeAttribute("style"),errorText.innerHTML=e}function h(e,t){return!(e.y+e.height<t.y||e.y>t.y+t.height||e.x+e.width<t.x||e.x>t.x+t.width)}window.isTimerPaused=!1,window.togglePause=function(){loop.isStopped?loop.start():loop.stop(),isTimerPaused=!isTimerPaused};const p=document.getElementById("selectedSpriteInfo");function y(e){p.innerHTML="",clearInterval(e.interval)}function f(e){p.innerHTML="";let t=document.createElement("ul");const i=["height","width","color","speed","isFertile","fertilityRate","fertilityProgress","hunger","totalHunger","health","totalHealth","damage","defence","sight"];Object.entries(e).map(e=>{for(let r=0;r<i.length-1;r++)if(e[0]===i[r]){let i=document.createElement("li"),r=document.createTextNode(e[0]+": "+e[1]);i.appendChild(r),t.appendChild(i);break}}),p.appendChild(t)}let m=1;function v(e,t){(e.hunger<.5*e.totalHunger||e.isFertile&&t.isFertile)&&(e.position._x>t.position._x?e.velocity._x>0&&(e.velocity._x*=-1):e.velocity._x<0&&(e.velocity._x*=-1),e.position._y>t.position._y?e.velocity._y>0&&(e.velocity._y*=-1):e.velocity._y<0&&(e.velocity._y*=-1))}function w(e,t){e.position._x>t.position._x?e.velocity._x<0&&(e.velocity._x*=-1):e.velocity._x>0&&(e.velocity._x*=-1),e.position._y>t.position._y?e.velocity._y<0&&(e.velocity._y*=-1):e.velocity._y>0&&(e.velocity._y*=-1)}function H(e,t,i,r,n,o,a,l,s,d){m+=1;let u=kontra.sprite({id:m,selected:!1,interval:null,x:e,y:t,color:"red",width:i,height:i,ttl:1/0,speed:r,dx:Math.random()*r-2,dy:Math.random()*r-2,isFertile:!1,fertilityRate:n,fertilityProgress:0,totalFertilityProgress:o,hunger:a,totalHunger:a,health:l,totalHealth:l,damage:s,defence:d,sight:50,stealth:0,diseased:{diseased:!1,damage:0},isColliding:!1,onUp:function(){var e;e=this,sprites.forEach(t=>{e!==t&&(t.selected="false",clearInterval(t.interval),t.color="red")}),"true"!==e.selected&&(clearInterval(e),e.color="green",e.selected="true",f(e),e.interval=setInterval(()=>{isTimerPaused||f(e)},100))}});sprites.push(u),kontra.pointer.track(u)}function P(e,t){let i={};(i=1===g(1,2)?Object.assign({},e):Object.assign({},t)).size=1===g(1,2)?e.width:t.width,i.speed=1===g(1,2)?e.speed:t.speed,i.fertilityRate=1===g(1,2)?e.fertilityRate:t.fertilityRate,i.totalFertilityProgress=1===g(1,2)?e.totalFertilityProgress:t.totalFertilityProgress,i.totalHunger=1===g(1,2)?e.totalHunger:t.totalHunger,i.totalHealth=1===g(1,2)?e.totalHealth:t.totalHealth,i.damage=1===g(1,2)?e.damage:t.damage,i.defence=1===g(1,2)?e.defence:t.defence;const r=g(1,8);1===r?1===g(1,2)?i.size+=5:i.size>5&&(i.size-=5):2===r?1===g(1,2)?i.speed+=1:i.speed>=1&&(i.speed-=1):3===r?1===g(1,2)?i.fertilityRate+=1:i.fertilityRate>=1&&(i.fertilityRate-=1):4===r?1===g(1,2)?i.totalHunger+=100:i.totalHunger>100&&(i.totalHunger-=100):5===r?1===g(1,2)?i.totalHealth+=10:i.totalHealth>=10&&(i.totalHealth-=10):6===r?1===g(1,2)?i.damage+=1:i.damage>=1&&(i.damage-=1):7===r?1===g(1,2)?i.defence+=1:i.defence>=1&&(i.defence-=1):8===r&&(1===g(1,2)?i.totalFertilityProgress+=10:i.totalFertilityProgress>=10&&(i.totalFertilityProgress-=10)),H(i.position._x,i.position._y,i.size,i.speed,i.fertilityRate,i.totalFertilityProgress,i.totalHunger,i.totalHealth,i.damage,i.defence),e.isFertile=!1,t.isFertile=!1}window.infinityGauntlet=function(){let e=Math.round(sprites.length/2);for(let t=0;t<e;t++)sprites[t].interval&&y(sprites[t]),sprites[t].ttl=0},window.starve=function(){for(let e=0;e<sprites.length-1;e++)sprites[e].hunger=0};const x=document.getElementById("errorText"),S=document.getElementById("sim"),T=document.getElementById("form");window.amountToSpawn=5,window.gSize=25,window.gSpeed=4,window.gFertilityRate=1,window.gFertilityProgress=1e3,window.gTotalHunger=2e3,window.gHealth=2e3,window.gDamage=10,window.gDefence=5,document.getElementById("amount").value=amountToSpawn,document.getElementById("size").value=gSize,document.getElementById("speed").value=gSpeed,document.getElementById("fertilityRate").value=gFertilityRate,document.getElementById("fertilityProgress").value=gFertilityProgress,document.getElementById("totalHunger").value=gTotalHunger,document.getElementById("health").value=gHealth,document.getElementById("damage").value=gDamage,document.getElementById("defence").value=gDefence,document.addEventListener("DOMContentLoaded",function(){document.querySelector('input[id="amount"]').onchange=u,document.querySelector('input[id="size"]').onchange=u,document.querySelector('input[id="speed"]').onchange=u,document.querySelector('input[id="fertilityRate"]').onchange=u,document.querySelector('input[id="fertilityProgress"]').onchange=u,document.querySelector('input[id="totalHunger"]').onchange=u,document.querySelector('input[id="health"]').onchange=u,document.querySelector('input[id="damage"]').onchange=u,document.querySelector('input[id="defence"]').onchange=u},!1),window.startGame=function(){T.setAttribute("style","display:none;"),S.removeAttribute("style"),kontra.init(),window.sprites=[];const e=document.getElementById("spriteCount");window.restart=function(){sprites.forEach(e=>{y(e)}),loop.isStopped||loop.stop(),sprites=[],x.setAttribute("style","display:none;"),isTimerPaused=!1,function(){const e=800,t=600;for(let i=0;i<amountToSpawn;i++)H(Math.floor(Math.random()*e),Math.floor(Math.random()*t),gSize,gSpeed,gFertilityRate,gFertilityProgress,gTotalHunger,gHealth,gDamage,gDefence)}(),s(),loop.start()},window.loop=kontra.gameLoop({update(){sprites.map(e=>{e.update(),function(e){e.x<0?e.x=kontra.canvas.width:e.x>kontra.canvas.width&&(e.x=0),e.y<0?e.y=kontra.canvas.height:e.y>kontra.canvas.height&&(e.y=0)}(e),function(e){e.hunger>=.9*e.totalHunger&&e.health<e.totalHealth&&(e.health+=1),e.health<=0&&(e.interval&&y(e),e.ttl=0),e.hunger<=0&&e.health>0&&(e.health-=1),e.hunger>0&&(e.hunger-=1),e.isFertile||(e.fertilityProgress<e.totalFertilityProgress&&(e.fertilityProgress+=e.fertilityRate),e.fertilityProgress>=e.totalFertilityProgress&&(e.isFertile=!0,e.fertilityProgress=0))}(e),function(e){for(let t=0;t<sprites.length;t++){const i=sprites[t];i!==e&&h({x:e.x+e.width/2,y:e.y+e.height/2,height:2*e.sight-i.stealth,width:2*e.sight-i.stealth},i)&&(e.damage>i.defence&&e.health>i.health?v(e,i):w(e,i))}}(e)}),sprites.forEach((e,t)=>{e.isColliding=!1}),function(){for(let i=0;i<sprites.length-1;i++)for(let r=i+1;r<sprites.length;r++)h(sprites[i],sprites[r])&&sprites[i]!==sprites[r]&&(sprites[i].isColliding=!0,sprites[r].isColliding=!0,sprites[i].isFertile&&sprites[r].isFertile?P(sprites[i],sprites[r]):(e=sprites[i],t=sprites[r],e.health>0&&e.defence<t.damage&&(e.health-=t.damage-e.defence),e.hunger<e.totalHunger-10&&(e.hunger+=10),t.health>0&&t.defence<e.damage&&(t.health-=e.damage-t.defence),t.hunger<t.totalHunger&&(t.hunger+=1)));var e,t}(),sprites=sprites.filter(e=>e.isAlive()),e.innerHTML=sprites.length,sprites.length>=400?(d(),c("Exponential growth detected... Sim over; please restart.")):sprites.length<=0&&(d(),c("All sprites are dead... Sim over; please restart."))},render(){sprites.map(e=>e.render())}})},window.stopGame=function(){sprites.forEach(e=>{y(e)}),isTimerPaused=!1,s(),sprites=[],x.setAttribute("style","display:none;"),S.setAttribute("style","display:none;"),T.removeAttribute("style")}}]);
//# sourceMappingURL=main.js.map