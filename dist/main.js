!function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);const i=document.getElementById("seconds"),n=document.getElementById("minutes"),a=document.getElementById("hours");let l=null;function o(){let e=0;i.innerHTML=0;let t=0;n.innerHTML=0;let r=0;a.innerHTML=0,l=setInterval(()=>{isTimerPaused||(60===(e+=1)&&(t+=1,e=0,n.innerHTML=t),60===t&&(r+=1,t=0,a.innerHTML=r),i.innerHTML=e)},1e3)}function s(){l?(clearInterval(l),o()):o()}function d(){loop.stop(),isTimerPaused=!0}function u(e){e.target.value?"amount"===this.id?amountToSpawn=e.target.value:"size"===this.id?gSize=e.target.value:"speed"===this.id?gSpeed=e.target.value:"fertilityRate"===this.id?gFertilityRate=e.target.value:"fertilityProgress"===this.id?gFertilityProgress=e.target.value:"totalHunger"===this.id?gTotalHunger=e.target.value:"health"===this.id?gHealth=e.target.value:"damage"===this.id?gDamage=e.target.value:"defence"===this.id&&(gDefence=e.target.value):(alert("All fields must have a value"),"amount"===this.id?e.target.value=amountToSpawn:"size"===this.id?e.target.value=gSize:"speed"===this.id?e.target.value=gSpeed:"fertilityRate"===this.id?e.target.value=gFertilityRate:"fertilityProgress"===this.id?e.target.value=gFertilityProgress:"totalHunger"===this.id?e.target.value=gTotalHunger:"health"===this.id?e.target.value=gHealth:"damage"===this.id?e.target.value=gDamage:"defence"===this.id&&(e.target.value=gDefence))}function g(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function c(e){errorText.removeAttribute("style"),errorText.innerHTML=e}window.isTimerPaused=!1,window.togglePause=function(){loop.isStopped?loop.start():loop.stop(),isTimerPaused=!isTimerPaused};const h=document.getElementById("selectedSpriteInfo");function p(e){h.innerHTML="",clearInterval(e.interval)}function f(e){h.innerHTML="";let t=document.createElement("ul");const r=["height","width","color","speed","isFertile","fertilityRate","fertilityProgress","hunger","totalHunger","health","totalHealth","damage","defence","sight"];Object.entries(e).map(e=>{for(let i=0;i<r.length-1;i++)if(e[0]===r[i]){let r=document.createElement("li"),i=document.createTextNode(e[0]+": "+e[1]);r.appendChild(i),t.appendChild(r);break}}),h.appendChild(t)}let m=1;function y(e,t,r,i,n,a,l,o,s,d){m+=1;let u=kontra.sprite({id:m,selected:!1,interval:null,x:e,y:t,color:"red",width:r,height:r,ttl:1/0,speed:i,dx:Math.random()*i-2,dy:Math.random()*i-2,isFertile:!1,fertilityRate:n,fertilityProgress:0,totalFertilityProgress:a,hunger:l,totalHunger:l,health:o,totalHealth:o,damage:s,defence:d,sight:0,diseased:{diseased:!1,damage:0},isColliding:!1,onUp:function(){var e;e=this,sprites.forEach(t=>{e!==t&&(t.selected="false",clearInterval(t.interval),t.color="red")}),"true"!==e.selected&&(clearInterval(e),e.color="green",e.selected="true",f(e),e.interval=setInterval(()=>{isTimerPaused||f(e)},100))}});sprites.push(u),kontra.pointer.track(u)}function v(e,t){let r={};(r=1===g(1,2)?Object.assign({},e):Object.assign({},t)).size=1===g(1,2)?e.width:t.width,r.speed=1===g(1,2)?e.speed:t.speed,r.fertilityRate=1===g(1,2)?e.fertilityRate:t.fertilityRate,r.totalFertilityProgress=1===g(1,2)?e.totalFertilityProgress:t.totalFertilityProgress,r.totalHunger=1===g(1,2)?e.totalHunger:t.totalHunger,r.totalHealth=1===g(1,2)?e.totalHealth:t.totalHealth,r.damage=1===g(1,2)?e.damage:t.damage,r.defence=1===g(1,2)?e.defence:t.defence;const i=g(1,8);1===i?1===g(1,2)?r.size+=5:r.size>5&&(r.size-=5):2===i?1===g(1,2)?r.speed+=1:r.speed>=1&&(r.speed-=1):3===i?1===g(1,2)?r.fertilityRate+=1:r.fertilityRate>=1&&(r.fertilityRate-=1):4===i?1===g(1,2)?r.totalHunger+=100:r.totalHunger>100&&(r.totalHunger-=100):5===i?1===g(1,2)?r.totalHealth+=10:r.totalHealth>=10&&(r.totalHealth-=10):6===i?1===g(1,2)?r.damage+=1:r.damage>=1&&(r.damage-=1):7===i?1===g(1,2)?r.defence+=1:r.defence>=1&&(r.defence-=1):8===i&&(1===g(1,2)?r.totalFertilityProgress+=10:r.totalFertilityProgress>=10&&(r.totalFertilityProgress-=10)),y(r.position._x,r.position._y,r.size,r.speed,r.fertilityRate,r.totalFertilityProgress,r.totalHunger,r.totalHealth,r.damage,r.defence),e.isFertile=!1,t.isFertile=!1}window.infinityGauntlet=function(){let e=Math.round(sprites.length/2);for(let t=0;t<e;t++)sprites[t].interval&&p(sprites[t]),sprites[t].ttl=0},window.starve=function(){for(let e=0;e<sprites.length-1;e++)sprites[e].hunger=0};const w=document.getElementById("errorText"),H=document.getElementById("sim"),P=document.getElementById("form");window.amountToSpawn=50,window.gSize=25,window.gSpeed=4,window.gFertilityRate=1,window.gFertilityProgress=1e3,window.gTotalHunger=2e3,window.gHealth=2e3,window.gDamage=10,window.gDefence=5,document.getElementById("amount").value=amountToSpawn,document.getElementById("size").value=gSize,document.getElementById("speed").value=gSpeed,document.getElementById("fertilityRate").value=gFertilityRate,document.getElementById("fertilityProgress").value=gFertilityProgress,document.getElementById("totalHunger").value=gTotalHunger,document.getElementById("health").value=gHealth,document.getElementById("damage").value=gDamage,document.getElementById("defence").value=gDefence,document.addEventListener("DOMContentLoaded",function(){document.querySelector('input[id="amount"]').onchange=u,document.querySelector('input[id="size"]').onchange=u,document.querySelector('input[id="speed"]').onchange=u,document.querySelector('input[id="fertilityRate"]').onchange=u,document.querySelector('input[id="fertilityProgress"]').onchange=u,document.querySelector('input[id="totalHunger"]').onchange=u,document.querySelector('input[id="health"]').onchange=u,document.querySelector('input[id="damage"]').onchange=u,document.querySelector('input[id="defence"]').onchange=u},!1),window.startGame=function(){P.setAttribute("style","display:none;"),H.removeAttribute("style"),kontra.init(),window.sprites=[];const e=document.getElementById("spriteCount");window.restart=function(){sprites.forEach(e=>{p(e)}),loop.isStopped||loop.stop(),sprites=[],w.setAttribute("style","display:none;"),isTimerPaused=!1,function(){const e=800,t=600;for(let r=0;r<amountToSpawn;r++)y(Math.floor(Math.random()*e),Math.floor(Math.random()*t),gSize,gSpeed,gFertilityRate,gFertilityProgress,gTotalHunger,gHealth,gDamage,gDefence)}(),s(),loop.start()},window.loop=kontra.gameLoop({update(){sprites.map(e=>{e.update(),function(e){e.x<0?e.x=kontra.canvas.width:e.x>kontra.canvas.width&&(e.x=0),e.y<0?e.y=kontra.canvas.height:e.y>kontra.canvas.height&&(e.y=0)}(e),function(e){e.hunger>=.8*e.totalHunger&&e.health<e.totalHealth&&(e.health+=1),e.health<=0&&(e.interval&&p(e),e.ttl=0),e.hunger<=0&&e.health>0&&(e.health-=1),e.hunger>0&&(e.hunger-=1),e.isFertile||(e.fertilityProgress<e.totalFertilityProgress&&(e.fertilityProgress+=e.fertilityRate),e.fertilityProgress>=e.totalFertilityProgress&&(e.isFertile=!0,e.fertilityProgress=0))}(e)}),sprites.forEach((e,t)=>{e.isColliding=!1}),function(){for(let n=0;n<sprites.length-1;n++)for(let a=n+1;a<sprites.length;a++)r=sprites[n],i=sprites[a],r.y+r.height<i.y||r.y>i.y+i.height||r.x+r.width<i.x||r.x>i.x+i.width||sprites[n]===sprites[a]||(sprites[n].isColliding=!0,sprites[a].isColliding=!0,sprites[n].isFertile&&sprites[a].isFertile?v(sprites[n],sprites[a]):(e=sprites[n],t=sprites[a],e.health>0&&e.defence<t.damage&&(e.health-=t.damage-e.defence),e.hunger<e.totalHunger-10&&(e.hunger+=10),t.health>0&&t.defence<e.damage&&(t.health-=e.damage-t.defence),t.hunger<t.totalHunger&&(t.hunger+=1)));var e,t;var r,i}(),sprites=sprites.filter(e=>e.isAlive()),e.innerHTML=sprites.length,sprites.length>=400?(d(),c("Exponential growth detected... Sim over; please restart.")):sprites.length<=0&&(d(),c("All sprites are dead... Sim over; please restart."))},render(){sprites.map(e=>e.render())}})},window.stopGame=function(){sprites.forEach(e=>{p(e)}),isTimerPaused=!1,s(),sprites=[],w.setAttribute("style","display:none;"),H.setAttribute("style","display:none;"),P.removeAttribute("style")}}]);
//# sourceMappingURL=main.js.map