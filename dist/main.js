!function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);const r=document.getElementById("seconds"),n=document.getElementById("minutes"),a=document.getElementById("hours");let o=null;function l(){let e=0;r.innerHTML=0;let t=0;n.innerHTML=0;let i=0;a.innerHTML=0,o=setInterval(()=>{isTimerPaused||(60===(e+=1)&&(t+=1,e=0,n.innerHTML=t),60===t&&(i+=1,t=0,a.innerHTML=i),r.innerHTML=e)},1e3)}function s(){o?(clearInterval(o),l()):l()}function d(){loop.stop(),isTimerPaused=!0}function u(e){e.target.value?"amount"===this.id?amountToSpawn=e.target.value:"size"===this.id?size=e.target.value:"speed"===this.id?speed=e.target.value:"fertilityRate"===this.id?fertilityRate=e.target.value:"fertilityProgress"===this.id?fertilityProgress=e.target.value:"totalHunger"===this.id?totalHunger=e.target.value:"health"===this.id?health=e.target.value:"damage"===this.id?damage=e.target.value:"defence"===this.id&&(defence=e.target.value):(alert("All fields must have a value"),"amount"===this.id?e.target.value=amountToSpawn:"size"===this.id?e.target.value=size:"speed"===this.id?e.target.value=speed:"fertilityRate"===this.id?e.target.value=fertilityRate:"fertilityProgress"===this.id?e.target.value=fertilityProgress:"totalHunger"===this.id?e.target.value=totalHunger:"health"===this.id?e.target.value=health:"damage"===this.id?e.target.value=damage:"defence"===this.id&&(e.target.value=defence))}function c(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function g(e){errorText.removeAttribute("style"),errorText.innerHTML=e}window.isTimerPaused=!1,window.togglePause=function(){loop.isStopped?loop.start():loop.stop(),isTimerPaused=!isTimerPaused};const h=document.getElementById("selectedSpriteInfo");function f(e){h.innerHTML="",clearInterval(e.interval)}function p(e){h.innerHTML="";let t=document.createElement("ul");const i=["height","width","color","speed","isFertile","fertilityRate","fertilityProgress","hunger","totalHunger","health","totalHealth","damage","defence","sight"];Object.entries(e).map(e=>{for(let r=0;r<i.length-1;r++)if(e[0]===i[r]){let i=document.createElement("li"),r=document.createTextNode(e[0]+": "+e[1]);i.appendChild(r),t.appendChild(i);break}}),h.appendChild(t)}let m=1;function y(e,t,i,r,n,a,o,l,s,d){m+=1;let u=kontra.sprite({id:m,selected:!1,interval:null,x:e,y:t,color:"red",width:i,height:i,ttl:1/0,speed:r,dx:Math.random()*r-2,dy:Math.random()*r-2,isFertile:!1,fertilityRate:n,fertilityProgress:a,hunger:o,totalHunger:o,health:l,totalHealth:l,damage:s,defence:d,sight:0,diseased:{diseased:!1,damage:0},isColliding:!1,onUp:function(){var e;e=this,sprites.forEach(t=>{e!==t&&(t.selected="false",clearInterval(t.interval),t.color="red")}),e.color="green",e.selected="true",p(e),e.interval=setInterval(()=>{isTimerPaused||p(e)},100)}});sprites.push(u),kontra.pointer.track(u)}function v(e,t){let i={};(i=1===c(1,2)?Object.assign({},e):Object.assign({},t)).size=1===c(1,2)?e.width:t.width,i.speed=1===c(1,2)?e.speed:t.speed,i.fertilityRate=1===c(1,2)?e.fertilityRate:t.fertilityRate,i.totalHunger=1===c(1,2)?e.totalHunger:t.totalHunger,i.health=1===c(1,2)?e.health:t.health,i.damage=1===c(1,2)?e.damage:t.damage,i.defence=1===c(1,2)?e.defence:t.defence;const r=c(1,7);1===r?1===c(1,2)?i.size+=5:i.size>5&&(i.size-=5):2===r?1===c(1,2)?i.speed+=1:i.speed>4&&(i.speed-=1):3===r?1===c(1,2)?i.fertilityRate+=1:i.fertilityRate>0&&(i.fertilityRate-=1):4===r?1===c(1,2)?i.totalHunger+=100:i.totalHunger>100&&(i.totalHunger-=100):5===r?1===c(1,2)?i.health+=10:i.health>10&&(i.health-=10):6===r?1===c(1,2)?i.damage+=5:i.damage>0&&(i.damage-=5):7===r&&(1===c(1,2)?i.defence+=5:i.defence>0&&(i.defence-=5)),y(i.position._x,i.position._y,i.size,i.speed,i.fertilityRate,0,i.totalHunger,i.health,i.damage,i.defence),e.isFertile=!1,t.isFertile=!1}window.infinityGauntlet=function(){let e=sprites.length-1;e=Math.round(e/2);for(let t=0;t<e;t++)sprites[t].ttl=0},window.starve=function(){for(let e=0;e<sprites.length-1;e++)sprites[e].hunger=0},window.errorText=document.getElementById("errorText"),window.sim=document.getElementById("sim"),window.form=document.getElementById("form"),window.amountToSpawn=50,window.size=25,window.speed=4,window.fertilityRate=1,window.fertilityProgress=1e3,window.totalHunger=2e3,window.health=2e3,window.damage=10,window.defence=5,document.getElementById("amount").value=amountToSpawn,document.getElementById("size").value=size,document.getElementById("speed").value=speed,document.getElementById("fertilityRate").value=fertilityRate,document.getElementById("fertilityProgress").value=fertilityProgress,document.getElementById("totalHunger").value=totalHunger,document.getElementById("health").value=health,document.getElementById("damage").value=damage,document.getElementById("defence").value=defence,document.addEventListener("DOMContentLoaded",function(){document.querySelector('input[id="amount"]').onchange=u,document.querySelector('input[id="size"]').onchange=u,document.querySelector('input[id="speed"]').onchange=u,document.querySelector('input[id="fertilityRate"]').onchange=u,document.querySelector('input[id="fertilityProgress"]').onchange=u,document.querySelector('input[id="totalHunger"]').onchange=u,document.querySelector('input[id="health"]').onchange=u,document.querySelector('input[id="damage"]').onchange=u,document.querySelector('input[id="defence"]').onchange=u},!1),window.startGame=function(){form.setAttribute("style","display:none;"),sim.removeAttribute("style"),kontra.init(),window.sprites=[];const e=document.getElementById("spriteCount");window.restart=function(){sprites.forEach(e=>{f(e)}),loop.isStopped||loop.stop(),sprites=[],errorText.setAttribute("style","display:none;"),isTimerPaused=!1,function(){const e=800,t=600;for(let i=0;i<amountToSpawn;i++)y(Math.floor(Math.random()*e),Math.floor(Math.random()*t),size,speed,fertilityRate,c(1,fertilityProgress),totalHunger,health,damage,defence)}(amountToSpawn,size,speed,fertilityRate,fertilityProgress,totalHunger,health,damage,defence),s(),loop.start()},window.loop=kontra.gameLoop({update(){sprites.map(e=>{e.update(),function(e){e.x<0?e.x=kontra.canvas.width:e.x>kontra.canvas.width&&(e.x=0),e.y<0?e.y=kontra.canvas.height:e.y>kontra.canvas.height&&(e.y=0)}(e),function(e){e.health<=0&&(e.interval&&f(e),e.ttl=0),e.hunger<=0&&e.health>0&&(e.health-=1),e.hunger>0&&(e.hunger-=1),e.isFertile||(e.fertilityProgress<fertilityProgress&&(e.fertilityProgress+=e.fertilityRate),e.fertilityProgress===fertilityProgress&&(e.isFertile=!0,e.fertilityProgress=0))}(e)}),sprites.forEach((e,t)=>{e.isColliding=!1}),function(){for(let n=0;n<sprites.length-1;n++)for(let a=n+1;a<sprites.length;a++)i=sprites[n],r=sprites[a],i.y+i.height<r.y||i.y>r.y+r.height||i.x+i.width<r.x||i.x>r.x+r.width||sprites[n]===sprites[a]||(sprites[n].isColliding=!0,sprites[a].isColliding=!0,sprites[n].isFertile&&sprites[a].isFertile?v(sprites[n],sprites[a]):(e=sprites[n],t=sprites[a],e.health>0&&(e.health-=t.damage-e.defence),e.hunger<e.totalHunger-10&&(e.hunger+=10),t.health>0&&(t.health-=e.damage-t.defence),t.hunger<t.totalHunger&&(t.hunger+=1)));var e,t;var i,r}(),sprites=sprites.filter(e=>e.isAlive()),e.innerHTML=sprites.length,sprites.length>=400?(d(),g("Exponential growth detected... Sim over; please restart.")):sprites.length<=0&&(d(),g("All sprites are dead... Sim over; please restart."))},render(){sprites.map(e=>e.render())}})},window.stopGame=function(){sprites.forEach(e=>{f(e)}),isTimerPaused=!1,s(),sprites=[],errorText.setAttribute("style","display:none;"),sim.setAttribute("style","display:none;"),form.removeAttribute("style")}}]);
//# sourceMappingURL=main.js.map