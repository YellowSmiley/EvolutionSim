!function(e){var t={};function i(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);const r=document.getElementById("seconds"),a=document.getElementById("minutes"),n=document.getElementById("hours");let l=null;function o(){let e=0;r.innerHTML=0;let t=0;a.innerHTML=0;let i=0;n.innerHTML=0,l=setInterval(()=>{isTimerPaused||(60===(e+=1)&&(t+=1,e=0,a.innerHTML=t),60===t&&(i+=1,t=0,n.innerHTML=i),r.innerHTML=e)},1e3)}function s(){l?(clearInterval(l),o()):o()}function g(){loop.stop(),isTimerPaused=!0}function u(e){return!isNaN(e)||(alert("Input must be a number"),!1)}function d(e){e.target.value?"amount"===this.id?u(e.target.value)?amountToSpawn=parseInt(e.target.value,10):e.target.value=amountToSpawn:"size"===this.id?u(e.target.value)?gSize=parseInt(e.target.value,10):e.target.value=gSize:"speed"===this.id?u(e.target.value)?gSpeed=parseInt(e.target.value,10):e.target.value=gSpeed:"fertilityRate"===this.id?u(e.target.value)?gFertilityRate=parseInt(e.target.value,10):e.target.value=gFertilityRate:"fertilityProgress"===this.id?u(e.target.value)?gFertilityProgress=parseInt(e.target.value,10):e.target.value=gFertilityProgress:"totalHunger"===this.id?u(e.target.value)?gTotalHunger=parseInt(e.target.value,10):e.target.value=gTotalHunger:"health"===this.id?u(e.target.value)?gHealth=parseInt(e.target.value,10):e.target.value=gHealth:"damage"===this.id?u(e.target.value)?gDamage=parseInt(e.target.value,10):e.target.value=gDamage:"defence"===this.id?u(e.target.value)?gDefence=parseInt(e.target.value,10):e.target.value=gDefence:"sight"===this.id?u(e.target.value)?gSight=parseInt(e.target.value,10):e.target.value=gSight:"stealth"===this.id&&(u(e.target.value)?gStealth=parseInt(e.target.value,10):e.target.value=gStealth):(alert("All fields must have a value"),"amount"===this.id?e.target.value=amountToSpawn:"size"===this.id?e.target.value=gSize:"speed"===this.id?e.target.value=gSpeed:"fertilityRate"===this.id?e.target.value=gFertilityRate:"fertilityProgress"===this.id?e.target.value=gFertilityProgress:"totalHunger"===this.id?e.target.value=gTotalHunger:"health"===this.id?e.target.value=gHealth:"damage"===this.id?e.target.value=gDamage:"defence"===this.id?e.target.value=gDefence:"sight"===this.id?e.target.value=gSight:"stealth"===this.id&&(e.target.value=gStealth))}function h(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function c(e){errorText.removeAttribute("style"),errorText.innerHTML=e}function p(e,t){return!(e.y+e.height<t.y||e.y>t.y+t.height||e.x+e.width<t.x||e.x>t.x+t.width)}window.isTimerPaused=!1,window.togglePause=function(){loop.isStopped?loop.start():loop.stop(),isTimerPaused=!isTimerPaused};const y=document.getElementById("selectedSpriteInfo");function m(e){y.innerHTML="",clearInterval(e.interval)}function f(e){y.innerHTML="";let t=document.createElement("ul");const i=["height","width","color","speed","isFertile","fertilityRate","fertilityProgress","hunger","totalHunger","health","totalHealth","damage","defence","sight","stealth"];Object.entries(e).map(e=>{for(let r=0;r<i.length;r++)if(e[0]===i[r]){let i=document.createElement("li"),r=document.createTextNode(e[0]+": "+e[1]);i.appendChild(r),t.appendChild(i);break}}),y.appendChild(t)}let v=1;function w(e,t){e.position._x>t.position._x?e.velocity._x>0&&(e.velocity._x*=-1):e.velocity._x<0&&(e.velocity._x*=-1),e.position._y>t.position._y?e.velocity._y>0&&(e.velocity._y*=-1):e.velocity._y<0&&(e.velocity._y*=-1)}function S(e,t){e.position._x>t.position._x?e.velocity._x<0&&(e.velocity._x*=-1):e.velocity._x>0&&(e.velocity._x*=-1),e.position._y>t.position._y?e.velocity._y<0&&(e.velocity._y*=-1):e.velocity._y>0&&(e.velocity._y*=-1)}function H(e,t,i,r,a,n,l,o,s,g,u,d){v+=1;let h=kontra.sprite({id:v,selected:!1,interval:null,x:e,y:t,color:"red",width:i,height:i,ttl:1/0,speed:r,dx:Math.random()*r-2,dy:Math.random()*r-2,isFertile:!1,fertilityRate:a,fertilityProgress:0,totalFertilityProgress:n,hunger:l,totalHunger:l,health:o,totalHealth:o,damage:s,defence:g,sight:u,stealth:d,diseased:{diseased:!1,damage:0},isColliding:!1,onUp:function(){var e;e=this,sprites.forEach(t=>{e!==t&&(t.selected="false",clearInterval(t.interval),t.color="red")}),"true"!==e.selected&&(clearInterval(e),e.color="green",e.selected="true",f(e),e.interval=setInterval(()=>{isTimerPaused||f(e)},100))}});sprites.push(h),kontra.pointer.track(h)}function P(e,t){let i={};(i=1===h(1,2)?Object.assign({},e):Object.assign({},t)).size=1===h(1,2)?e.width:t.width,i.speed=1===h(1,2)?e.speed:t.speed,i.fertilityRate=1===h(1,2)?e.fertilityRate:t.fertilityRate,i.totalFertilityProgress=1===h(1,2)?e.totalFertilityProgress:t.totalFertilityProgress,i.totalHunger=1===h(1,2)?e.totalHunger:t.totalHunger,i.totalHealth=1===h(1,2)?e.totalHealth:t.totalHealth,i.damage=1===h(1,2)?e.damage:t.damage,i.defence=1===h(1,2)?e.defence:t.defence,i.sight=1===h(1,2)?e.sight:t.sight,i.stealth=1===h(1,2)?e.stealth:t.stealth;const r=h(1,10);1===r?1===h(1,2)?i.size+=5:i.size>5&&(i.size-=5):2===r?1===h(1,2)?i.speed+=1:i.speed>=1&&(i.speed-=1):3===r?1===h(1,2)?i.fertilityRate+=1:i.fertilityRate>=1&&(i.fertilityRate-=1):4===r?1===h(1,2)?i.totalHunger+=100:i.totalHunger>100&&(i.totalHunger-=100):5===r?1===h(1,2)?i.totalHealth+=10:i.totalHealth>=10&&(i.totalHealth-=10):6===r?1===h(1,2)?i.damage+=1:i.damage>=1&&(i.damage-=1):7===r?1===h(1,2)?i.defence+=1:i.defence>=1&&(i.defence-=1):8===r?1===h(1,2)?i.totalFertilityProgress+=10:i.totalFertilityProgress>=10&&(i.totalFertilityProgress-=10):9===r?1===h(1,2)?i.sight+=1:i.sight>0&&(i.sight-=1):10===r&&(1===h(1,2)?i.stealth+=1:i.stealth>0&&(i.stealth-=1)),H(i.position._x,i.position._y,i.size,i.speed,i.fertilityRate,i.totalFertilityProgress,i.totalHunger,i.totalHealth,i.damage,i.defence,i.sight,i.stealth),e.isFertile=!1,t.isFertile=!1}window.infinityGauntlet=function(){let e=Math.round(sprites.length/2);for(let t=0;t<e;t++)sprites[t].interval&&m(sprites[t]),sprites[t].ttl=0},window.starve=function(){for(let e=0;e<sprites.length-1;e++)sprites[e].hunger=0};const I=document.getElementById("errorText"),T=document.getElementById("sim"),x=document.getElementById("form");window.amountToSpawn=10,window.gSize=25,window.gSpeed=4,window.gFertilityRate=1,window.gFertilityProgress=1e3,window.gTotalHunger=2e3,window.gHealth=2e3,window.gDamage=10,window.gDefence=5,window.gSight=25,window.gStealth=0,document.getElementById("amount").value=amountToSpawn,document.getElementById("size").value=gSize,document.getElementById("speed").value=gSpeed,document.getElementById("fertilityRate").value=gFertilityRate,document.getElementById("fertilityProgress").value=gFertilityProgress,document.getElementById("totalHunger").value=gTotalHunger,document.getElementById("health").value=gHealth,document.getElementById("damage").value=gDamage,document.getElementById("defence").value=gDefence,document.getElementById("sight").value=gSight,document.getElementById("stealth").value=gStealth,document.addEventListener("DOMContentLoaded",function(){document.querySelector('input[id="amount"]').onchange=d,document.querySelector('input[id="size"]').onchange=d,document.querySelector('input[id="speed"]').onchange=d,document.querySelector('input[id="fertilityRate"]').onchange=d,document.querySelector('input[id="fertilityProgress"]').onchange=d,document.querySelector('input[id="totalHunger"]').onchange=d,document.querySelector('input[id="health"]').onchange=d,document.querySelector('input[id="damage"]').onchange=d,document.querySelector('input[id="defence"]').onchange=d,document.querySelector('input[id="sight"]').onchange=d,document.querySelector('input[id="stealth"]').onchange=d},!1),window.startGame=function(){x.setAttribute("style","display:none;"),T.removeAttribute("style"),kontra.init(),window.sprites=[];const e=document.getElementById("spriteCount");window.restart=function(){sprites.forEach(e=>{m(e)}),loop.isStopped||loop.stop(),sprites=[],I.setAttribute("style","display:none;"),isTimerPaused=!1,function(){const e=800,t=600;for(let i=0;i<amountToSpawn;i++)H(h(1,e-1),h(1,t-1),gSize,gSpeed,gFertilityRate,gFertilityProgress,gTotalHunger,gHealth,gDamage,gDefence,gSight,gStealth)}(),s(),loop.start()},window.loop=kontra.gameLoop({update(){sprites.map(e=>{e.update(),function(e){e.x<0?e.x=kontra.canvas.width:e.x>kontra.canvas.width&&(e.x=0),e.y<0?e.y=kontra.canvas.height:e.y>kontra.canvas.height&&(e.y=0)}(e),function(e){e.hunger>=.9*e.totalHunger&&e.health<e.totalHealth&&(e.health+=1),e.health<=0&&(e.interval&&m(e),e.ttl=0),e.hunger<=0&&e.health>0&&(e.health-=1),e.hunger>0&&(e.hunger-=1),e.isFertile||(e.fertilityProgress<e.totalFertilityProgress&&(e.fertilityProgress+=e.fertilityRate),e.fertilityProgress>=e.totalFertilityProgress&&(e.isFertile=!0,e.fertilityProgress=0))}(e),e.sight>0&&function(e){for(let t=0;t<sprites.length;t++){const i=sprites[t];i!==e&&p({x:e.x+e.width/2,y:e.y+e.height/2,height:2*e.sight-i.stealth,width:2*e.sight-i.stealth},i)&&(e.health>i.health&&e.damage>i.defence&&e.hunger<.5*e.totalHunger||e.isFertile&&i.isFertile?w(e,i):S(e,i))}}(e)}),sprites.forEach((e,t)=>{e.isColliding=!1}),function(){for(let i=0;i<sprites.length-1;i++)for(let r=i+1;r<sprites.length;r++)p(sprites[i],sprites[r])&&sprites[i]!==sprites[r]&&(sprites[i].isColliding=!0,sprites[r].isColliding=!0,sprites[i].isFertile&&sprites[r].isFertile?P(sprites[i],sprites[r]):(e=sprites[i],t=sprites[r],e.health>0&&e.defence<t.damage&&(e.health-=t.damage-e.defence),e.hunger<e.totalHunger-10&&(e.hunger+=10),t.health>0&&t.defence<e.damage&&(t.health-=e.damage-t.defence),t.hunger<t.totalHunger&&(t.hunger+=1)));var e,t}(),sprites=sprites.filter(e=>e.isAlive()),e.innerHTML=sprites.length,sprites.length>=400?(g(),c("Exponential growth detected... Sim over; please restart.")):sprites.length<=0&&(g(),c("All sprites are dead... Sim over; please restart."))},render(){sprites.map(e=>e.render())}})},window.stopGame=function(){sprites.forEach(e=>{m(e)}),isTimerPaused=!1,s(),sprites=[],I.setAttribute("style","display:none;"),T.setAttribute("style","display:none;"),x.removeAttribute("style")}}]);
//# sourceMappingURL=main.js.map